<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="zxx" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<!--<![endif]-->
<!-- Begin Head -->

<head>
    <title>晓账本</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <meta name="MobileOptimized" content="320">
    <!--Start Style -->
    <link rel="stylesheet" type="text/css" href="static/css/fonts.css">
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/icofont.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/style.css">
	<link rel="stylesheet" id="theme-change" type="text/css" href="">
</head>

<body>
	<div class="loader">
	  <div class="spinner">
		<img src="static/picture/loader.gif" alt="">
	  </div> 
	</div>
    <!-- Main Body -->
    <div class="page-wrapper">
        <div th:replace="header.html::header"></div>
        <!-- Sidebar Start -->
        <aside class="sidebar-wrapper">
            <div class="side-menu-wrap">
                <ul class="main-menu">
                    <li>
                        <a href="index">
                            <span class="icon-menu feather-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                            </span>
                            <span class="menu-text">
                                控制台
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="record">
                            <span class="icon-menu feather-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-package"><line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                            </span>
                            <span class="menu-text">
                                账单记录
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="category">
                            <span class="icon-menu feather-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-grid nav-icon"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                            </span>
                            <span class="menu-text">
                                账单分类
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="account" class="active">
                            <span class="icon-menu feather-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                            </span>
                            <span class="menu-text">
                                账户设置
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
        </aside>
        <!-- Container Start -->
        <div class="page-wrapper">
            <div class="main-content">
                <!-- Page Title Start -->
                <div class="row">
                    <div class="col xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                        <div class="page-title-wrapper">
                            <div class="page-title-box">
                                <h4 class="page-title">设置</h4>
                            </div>
                            <div class="breadcrumb-list">
                                <ul>
                                    <li class="breadcrumb-link">
                                        <a href="javascript:void(0);"><i class="fas fa-home mr-2"></i>晓账本</a>
                                    </li>
                                    <li class="breadcrumb-link active">账户设置</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Products view Start -->
                <div class="from-wrapper">
                    <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4>修改昵称</h4>
                                    <p class="card-desc">您可以设置任何以大小写英文字母、数字组成的昵称</p>
                                </div>
                                <div class="card-body">
                                    <form onsubmit="return NicknameSetting()" method="post" action="updateName">
                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                            <div class="form-group">
                                                <label class="col-form-label">输入新的用户昵称</label>
                                                <input type="hidden" name="username" th:value="${username}">
                                                <input class="form-control" type="text" placeholder="" id="nickname" name="nickname">
                                            </div>
                                            <div class="form-group mb-0">
                                                <button type="submit" class="btn btn-primary">确认修改</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4>修改头像</h4>
                                    <p class="card-desc">请上传清晰的JPG格式或PNG格式的图片</p>
                                </div>
                                <div class="card-body">
                                    <form onsubmit="return updateImg()">
                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                            <div class="form-group">
                                                <label class="col-form-label">请选择头像</label>
                                                <input class="form-control" id="chooseImg" name="chooseImg">
                                            </div>
                                            <div class="form-group mb-0">
                                                <button type="submit" class="btn btn-primary">确认修改</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
                            <div class="card">
                                <form onsubmit="return PasswordSetting()" method="post" action="updatePassword">
                                <div class="card-header">
                                    <h4>修改密码</h4>
                                    <p class="card-desc">建议设置由大小写英文字母和数字组成的密码</p>
                                    <p th:if="${currentPasswordError}" class="card-desc" style="color: red">您输入的旧密码不正确！</p>
                                    <p th:if="${newPasswordError}" class="card-desc" style="color: red">您输入的两次新密码不一致！</p>
                                    <p th:if="${updatePasswordError}" class="card-desc" style="color: red">发生了未知错误，请检查无误后提交！</p>
                                </div>
                                <div class="card-body">
                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                            <div class="form-group row">
                                                <label class="col-md-2 col-form-label">旧密码：</label>
                                                <div class="col-md-10">
                                                    <input type="hidden" name="username" th:value="${username}">
                                                    <input class="form-control" type="password" placeholder="" id="originPassword" name="originPassword">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-md-2 col-form-label">新密码：</label>
                                                <div class="col-md-10">
                                                    <input class="form-control" type="password" placeholder="" id="newFirstPassword" name="newFirstPassword">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-md-2 col-form-label">确认密码：</label>
                                                <div class="col-md-10">
                                                    <input class="form-control" type="password" placeholder="" id="newSecondPassword" name="newSecondPassword">
                                                </div>
                                            </div>
                                            <div class="form-group mb-0">
                                                    <button type="submit" class="btn btn-primary">确认修改</button>
                                            </div>
                                        </div>
                                </div>
                                </form>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
<!--     footer会和上面的卡片重合，于是阉割了footer       -->
<!--                <div class="ad-footer-btm">-->
<!--                    <p>晓账本 后台管理系统 | 来自 <a target="_blank" href="https://www.sues.edu.cn/">上海工程技术大学</a></p>-->
<!--                </div>-->
            </div>
            </di>
                </div></div>>

        <!-- Script Start -->
	<script src="static/js/jquery.min.js"></script>
    <script src="static/js/popper.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
	<script src="static/js/swiper.min.js"></script>
    <script src="static/js/apexcharts.min.js"></script>
    <script src="static/js/control-chart-apexcharts.js"></script>
	<!-- Page Specific -->
    <script src="static/js/nice-select.min.js"></script>
    <!-- Custom Script -->
    <script src="static/js/custom.js"></script>
<script>
    function NicknameSetting(){
        let Nickname = document.getElementById("nickname").value;
        let pattern = /^.{1,16}$/;
        if(!pattern.test(Nickname)){
            alert("您似乎输入了一个格式不正确的用户昵称，请检查您的昵称是否过长或者包含了非法字符！");
            return false;
        }
        return true;
    }
</script>
<script>
    function PasswordSetting(){
        let originPassword = document.getElementById("originPassword").value;
        let newFirstPassword = document.getElementById("newFirstPassword").value;
        let newSecondPassword = document.getElementById("newSecondPassword").value;
        let pattern = /^[a-zA-Z0-9]+$/;

        if(!pattern.test(originPassword)||!pattern.test(newFirstPassword)||!pattern.test(newSecondPassword)){
            alert("您似乎输入了一个格式不正确的密码！");
            return false;
        }else if(newFirstPassword != newSecondPassword){
            alert("您两次输入的新密码似乎不一样！");
            return false;
        }else if(originPassword === newFirstPassword){
            alert("您输入的新密码和旧密码是相同的！");
            return false;
        }
        return true;
    }
</script>
<script>
    function updateImg(){
        alert("功能完善中！");
    }
</script>
</body>

</html>